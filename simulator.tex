\chapter{シミュレーション結果}
\section{概要}
この章ではシミュレーション結果とその詳細について述べる。まず初めに作成したシミュレーターの詳細について述べ、その後シミュレーション結果とその統計結果について言及する。
\bunseki{※尾崎拓海}

\subsection{ブラックジャックシミュレーター}
ベーシックストラテジーとその他の戦略を比較する事を目的に、ブラックジャックのシミュレーターをプログラミング言語（python3）を用いて作成した。このシミュレーターを使用して、
ベーシックストラテジー、基準値15の戦略、基準値16の戦略、基準値17の戦略、基準値18の戦略、ベーシックストラテジー改変1、ベーシックストラテジー改変2のそれぞれについて勝利回数、
敗北回数、引き分けた回数の3つを調べた。ここでは、シミュレーター内部の詳細を記述していく。
\bunseki{※尾崎拓海}

\subsubsection{基本設計}
まず初めに、シミュレーターの基本設計について説明する。今回作成したシミュレーターではブラックジャックを行う際に必要となる要素をクラスとして表現した。具体的にはトランプのカードを
表現するカードクラスとそれを一纏めにするデッククラス、ゲーム参加者を表すクラスとそれを継承したプレイヤークラスとディーラークラス、ゲームの勝敗を判定するマネージャークラスのそれ
ぞれを定義した。これらのクラスを用いてブラックジャックのゲームを再現し、ベーシックストラテジーとその他の戦略を実行するプログラムを作成した。次に各クラスの詳細を記述していく。
\bunseki{※尾崎拓海}

\subsubsection{トランプのカードを表現するクラス}
このクラスでは実際のトランプのカードを表現するためにrankという変数にA～Kというトランプのランクを、suitという
変数にスペード、ハート、ダイヤ、クラブのスートを定義した。また、J,Q,K,Aの絵札カードは10や11と数える必要があっ
たので、ランクを数字に変換する処理もこちらに書き、valueという変数に入力した。
\bunseki{※尾崎拓海}

\subsubsection{デックを表現するクラス}
このクラスでは先程定義したカードクラスを利用してデックを定義した。具体的には先程のカードクラスの配列を作成
し、その中にジョーカーを除く52種類のトランプカードを作成した。このクラスの初期化時に使用するデックの数を指
定する。また、デックのシャッフルには独自に作成した関数を使用した。このシャッフル関数はpythonのrandom機能を
用いて独自に設計したものであり、引数にシャッフルを行う回数を指定する。カードの配列の長さが仮に52だった場合に
は、1～26番目のカードからランダムに取り出したカードと、27～52番目のからランダムに取り出したカードを交換する
という処理を（デック数×指定されたシャッフル回数）繰り返すという処理でシャッフル関数を作成した。
\bunseki{※尾崎拓海}

\subsubsection{ゲーム参加者を表すスーパークラス}
このクラスでは自身の手札とその手札の合計値、手札に含まれるAの枚数、バーストしているかどうかのフラグ、手札
がブラックジャックとなっているかどうかのフラグのそれぞれを定義している。手札に含まれるAの枚数は自身の手札
の合計値を計算する時と、ブラックジャックの条件を満たしているかどうかを判別する際に使用した。また手札の合計
値を返す関数を定義し、その内側で自身がバーストしているかどうかの判定も行っている。
\bunseki{※尾崎拓海}

\subsubsection{プレイヤークラス}
このクラスは先のゲーム参加者を表すスーパークラスを継承しており、ゲームに参加しているプレイヤーを表現して
いる。プレイヤークラスでは新たに自身の名前を表す変数と自身の勝利回数、敗北回数を記録する変数を定義した。
またこのクラスでは新しく、カードを受け取る関数とヒットを行う関数、スタンドを行う関数、勝利回数と敗北回数
を増加させる関数を作成した。
\bunseki{※尾崎拓海}

\subsubsection{ディーラークラス}
このクラスは先のゲーム参加者を表すスーパークラスを継承しており、ゲームのディーラーを表現しているクラス
となっている。ディーラークラスの中でデックをインスタンス化してディーラー側がデックを所持している事を表
現している。このクラスでは新しく、デックのシャッフル回数という変数を定義した。また、このクラスではカード
を配る関数、ディーラーの手札合計が17を超えるまでカードを引き続ける関数を作成した。
\bunseki{※尾崎拓海}

\subsubsection{ゲームマネージャークラス}
このクラスは主にゲームの勝敗判定に使用している。プレイヤーとディーラーの手札の合計値を比較し勝敗を判定
する関数と、手札がブラックジャックになっているかどうかを判定する関数を作成した。勝敗判定のタイミングで
プレイヤーの勝利回数、敗北回数のそれぞれを記録している。
\bunseki{※尾崎拓海}

\subsubsection{メイン関数}
以上のクラスを用いてメイン関数にブラックジャックのゲームを記述した。以下にプログラムの実行手順を示す。
\begin{enumerate}
    \item ゲームに参加するプレイヤーを作成。今回はプレイヤーを一人のみ作成した。
    \item ディーラーを作成。
    \item カットカードを定義。カットカードを挟む位置はデックの半分の位置とした。
    \item ゲーム全体の実行回数を定義。今回は10万回とした。
    \item プレイヤーの戦略を配列形式で定義した。
    \item ゲームを繰り返すwhile文を作成し、ループ回数を10万回とした。
    \begin{enumerate}
        \item デックからカットカードが出てきたかを確認する。もし出てきていればデックをシャッフルする。
	  \item ディーラーが自身を含む各プレイヤーに初期カードを配る。
	  \item プレイヤーは自身の戦略に沿った行動を選択する。
	  \item すべてのプレイヤーの行動が終了したことを確認後にディーラーが行動を開始する
	  \item ディーラーの行動終了後に、勝敗判定を行う。
    \end{enumerate}
\end{enumerate}
\bunseki{※尾崎拓海}

\subsubsection{未実装の機能について}
今回のシミュレーションでは条件を簡単にするためにヒットとスタンドの処理のみを使用しており、その他の複雑な
ルールについては実装していない。ブラックジャックのすべてのルールをプログラム上に再現できているわけではな
いので、後期の活動で完全版のシミュレーターを作成する。
\bunseki{※尾崎拓海}

\subsection{シミュレーションの条件設定}
今回はデック数1とデック数無限の2つの条件でシミュレーションを行った。共通している条件は以下の通りである。
\begin{itemize}
\item プレイヤー人数は一人

\item ベーシックストラテジー、基準値15戦略、基準値16戦略、基準値17戦略、基準値18戦略、ベーシックストラテジー改変1、ベーシックストラテジー改変2それぞれの戦略でシミュレーターを実行する
\item ゲームの実行回数は10万回
\end{itemize}

デック数1という条件は元々定義していたデック数の変数を用いて作成した。デック数無限についてはどのカードも引
く確率が1/13という事実を利用して、pythonのrandom関数を使用し作成した。具体的にはディーラーがカードを配る
関数の部分をデックからカードを引いてくるのではなく、1/13の確率でA～Kいずれかのカードを配る様に設計した。
シミュレーション終了後は勝利回数、敗北回数、引き分け回数の3つをtxt形式で出力した。
\bunseki{※尾崎拓海}
