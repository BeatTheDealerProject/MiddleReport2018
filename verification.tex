\section{従来の戦略の問題点}
まず、ベーシックストラテジーの問題点について述べる。この戦略はデック数が無限個を想定しており、すでに引いたカードの種類や枚数を考慮していない点である。
まず、基本的にカジノで行われるゲームではデック数は有限である。デック数が有限であるということは、以前に引いたカードの種類によって、次に引くカードの確率が変化していくということである。例えば、プレイヤーが２人、デック数が１のゲームをしていると仮定する。ディーラーのアップカードがハートのエース、プレイヤー１の初期の手札がダイヤのエースとクローバーのエース、プレイヤー２の初期の手札がスペードのエースとハートの２が配られたとする。この時点でデック内のエースのカードはすべて配られてしまい、以後のゲームでエースが出る確率は０になっている。しかし、デック数を無限に設定すると、以後のゲームでもエースは無限に存在することになり、確率は4/52になってしまう。これが、デック数無限のシミュレーションと実際のゲームの相違点である。このような相違点を考慮しないため、実際の勝率とは異なってしまい、利益についてもばらつきが出てしまうのである。
またこの戦略は勝率が４割程度しかなく、勝利数だけで言えばカジノ側に負けてしまう。
カウンティングの問題点については後期に詳しく調査する予定である。
\bunseki{※菱田美紗紀}

\section{戦略同士の比較}
Thorp氏によって考案されたベーシックストラテジーについて検証を行う.
ベーシックストラテジーの性能評価のために比較対象として6つの戦略を考えた.
比較対象となる戦略は次の通りである.

\begin{itemize}
  \item ベーシックストラテジー改変1
  \item ベーシックストラテジー改変2
  \item プレイヤーの合計値が15以上になるまでヒットする戦略
  \item プレイヤーの合計値が16以上になるまでヒットする戦略
  \item プレイヤーの合計値が17以上になるまでヒットする戦略
  \item プレイヤーの合計値が18以上になるまでヒットする戦略
\end{itemize}

以上の6つの戦略について,これから詳細に説明する.
\bunseki{※米村祥裕}

\subsection{ベーシックストラテジー改変1}
ベーシックストラテジーはブラックジャックにおける有効な戦略の一つである.しかし
戦略の表に注目すると,表の複雑性を考えたときに変更の余地があると考えた.
戦略表においてプレイヤーの合計値が12の行に注目する.ディーラーのアップカードが2,3の時は
Sとなっているが,その後アップカードが4,5,6の時はH,アップカードが7,8,9,10,Aの時はHとなっており,
Hに挟まれてSが存在している.表を覚えることを考えると,同じ行の中で変化が少ない方がよいと考えられる.
そのため,ベーシックストラテジー改変1では表\ref{bschange1}に示すように,プレイヤーの合計値が12,ディーラーのアップ
カードが4,5,6の時の戦略をSに変更した.
\bunseki{※米村祥裕}

\begin{table}[htbp]
  \centering
  \caption{ベーシックストラテジー改変1\label{bschange1}}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|c|}{} & \multicolumn{10}{|c|}{ディーラーのアップカード} \\ \hline
    \multicolumn{2}{|c|}{} & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
    手札の合計 & 19以上 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 18 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 17 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 16 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 15 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 13\~ 14 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 12 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 11以下 & H & H & H & H & H & H & H & H & H & H \\ \hline
  \end{tabular}
\end{table}

\subsection{ベーシックストラテジー改変2}
ベーシックストラテジー改変1と同様にベーシックストラテジーの戦略表を改変した.
変更点は改変1と同様にプレイヤーの合計値が12の行である.改変1ではディーラーのアップカドが4,5,6の部分を
Sに変更したが,改変2ではHに変更した.この変更によってプレイヤーの合計値が12の行はすべてHという表\ref{bschange2}ができた.
\bunseki{※米村祥裕}

\begin{table}[htbp]
  \centering
  \caption{ベーシックストラテジー改変2\label{bschange2}}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|c|}{} & \multicolumn{10}{|c|}{ディーラーのアップカード} \\ \hline
    \multicolumn{2}{|c|}{} & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
    手札の合計 & 19以上 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 18 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 17 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 16 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 15 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 13\~ 14 & S & S & S & S & S & H & H & H & H & H \\ \cline{3-12}
              & 12 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 11以下 & H & H & H & H & H & H & H & H & H & H \\ \hline
  \end{tabular}
\end{table}

\subsection{プレイヤーの合計値が一定以上になるまでヒットする戦略}
ディーラーがある程度有利な戦略を採用しているという仮定の下で,プレイヤーもディーラーと同様の
行動を行う戦略を考えた.プレイヤーの手札の合計値が一定以上になるまでヒットするものとして、次の4つの戦略を用意した。
\begin{itemize}
  \item プレイヤーの合計値が15以上になるまでヒットする戦略
  \item プレイヤーの合計値が16以上になるまでヒットする戦略
  \item プレイヤーの合計値が17以上になるまでヒットする戦略
  \item プレイヤーの合計値が18以上になるまでヒットする戦略
\end{itemize}

\begin{table}[htbp]
  \centering
  \caption{プレイヤーの合計値が15以上になるまでヒットする戦略\label{hitleq15}}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|c|}{} & \multicolumn{10}{|c|}{ディーラーのアップカード} \\ \hline
    \multicolumn{2}{|c|}{} & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
    手札の合計 & 19以上 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 18 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 17 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 16 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 15 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 13\~ 14 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 12 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 11以下 & H & H & H & H & H & H & H & H & H & H \\ \hline
  \end{tabular}
\end{table}

\begin{table}[htbp]
  \centering
  \caption{プレイヤーの合計値が16以上になるまでヒットする戦略\label{hitleq16}}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|c|}{} & \multicolumn{10}{|c|}{ディーラーのアップカード} \\ \hline
    \multicolumn{2}{|c|}{} & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
    手札の合計 & 19以上 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 18 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 17 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 16 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 15 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 13\~ 14 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 12 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 11以下 & H & H & H & H & H & H & H & H & H & H \\ \hline
  \end{tabular}
\end{table}

\begin{table}[htbp]
  \centering
  \caption{プレイヤーの合計値が17以上になるまでヒットする戦略\label{hitleq17}}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|c|}{} & \multicolumn{10}{|c|}{ディーラーのアップカード} \\ \hline
    \multicolumn{2}{|c|}{} & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
    手札の合計 & 19以上 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 18 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 17 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 16 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 15 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 13\~ 14 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 12 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 11以下 & H & H & H & H & H & H & H & H & H & H \\ \hline
  \end{tabular}
\end{table}

\begin{table}[htbp]
  \centering
  \caption{プレイヤーの合計値が18以上になるまでヒットする戦略\label{hitleq18}}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|c|}{} & \multicolumn{10}{|c|}{ディーラーのアップカード} \\ \hline
    \multicolumn{2}{|c|}{} & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
    手札の合計 & 19以上 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 18 & S & S & S & S & S & S & S & S & S & S \\ \cline{3-12}
              & 17 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 16 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 15 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 13\~ 14 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 12 & H & H & H & H & H & H & H & H & H & H \\ \cline{3-12}
              & 11以下 & H & H & H & H & H & H & H & H & H & H \\ \hline
  \end{tabular}
\end{table}
\bunseki{※米村祥裕}


\subsection{シミュレーション結果}
シミュレータを用いて、10万回ブラックジャックを行った結果を表\ref{bstable}に示す。

\begin{table}[H]
 \caption{デック数と各戦略での勝利、負け、引き分け\label{bstable}}
 \begin{center}
  \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline & \multicolumn{3}{c|}{デック数無限} & \multicolumn{3}{c|}{デック数1} \\
    \cline{2-7} & 勝ち & 負け & 引き分け & 勝ち & 負け & 引き分け \\
    \hline ベーシックストラテジー & 42.746\% & 48.6355\% & 8.619\% & 43.111\% & 48.654\% & 8.235\% \\
    \hline ベーシックストラテジー改変1 & 42.583\% & 48.782\% & 8.635\% & 42.923\% & 48.909\% & 8.168\% \\
    \hline ベーシックストラテジー改変2 & 42.223\% & 49.079\% & 8.698\% & 42.955\% & 48.689\% & 8.356\% \\
    \hline 15以上 & 42.392\% & 49.458\% & 8.150\% & 42.063\% & 50.027\% & 7.910\% \\
    \hline 16以上 & 41.410\% & 49.506\% & 9.084\% & 41.580\% & 49.672\% & 8.748\% \\
    \hline 17以上 & 40.870\% & 49.400\% & 9.730\% & 40.974\% & 49.630\% & 9.396\% \\
    \hline 18以上 & 39.291\% & 52.587\% & 8.122\% & 42.071\% & 49.872\% & 8.057\% \\
    \hline
  \end{tabular}
 \end{center}
\end{table}
今回はシミュレータで各戦略を10万回実行した。その結果を勝ち、負け、引き分けの3種類に分けて、表\ref{bstable}にまとめた。縦軸はデックの数とそれに対応する勝敗とし、横軸は戦略ごとに分けている。例えば、ベーシックストラテジーでデック数1の場合を見ると勝ちが43.111\%で負けが48.654\%で引き分けが8.235\%となっている。またデック数1の勝ちを全体でみると最も多いことが分かる。全体として勝ちの数は4万回前後に収まっており、負けの数は５万回前後に収まっている。基本的に負けの数のほうが多いことが分かる。デック数で比べると、ほとんどの戦略でデック数１の場合のほうが勝ちの数が多いということが発見される。また、デック数に関係なく、勝ちの数はベーシックストラテジーが一番多い事が分かる。
\bunseki{※薩田凱斗}

\section{検定}
先ほどのシミュレーションを行った結果から、ベーシックストラテジーが各戦略の中で最も勝率が高いという事を明らかにする。そのために、各戦略の間の勝率にそれぞれ有意な差があるかどうかを明らかにする必要がある。また、デック数によって勝率が変化するということも明らかにするために、デック数の違いによって各戦略の勝率にそれぞれ有意な差があるかどうかも明らかにする必要がある。そこで、それらの推測が実際に正しいかどうかを確かめるために、カイ2乗検定を用いて検証を行った。
\bunseki{※薩田凱斗}

\newpage

\subsection{複雑性の定義について}

プレイヤーに扱いやすい戦略とは何かを定義する為に、戦略の複雑性を次のように定義した。
まず、戦略の文字列を圧縮する。元の表を「連続する文字+連続して文字が出た回数」と変換することで文字列を圧縮した。
例として、「HHSSSHHHHH」という10文字からなる文字列を圧縮すると、「H2S3H5」となり、圧縮した後の文字列は6文字
となる。また「HHHHHHHHHH」という文字列を「H10」と圧縮したときのように、連続して同じ文字が出た回数が2桁の場合には
数字部分を1文字として数える。つまり「H10」の文字列長は2文字である。

圧縮した後の文字列長を元の表の大きさ(80)で割った数値を複雑性の定義とした。
\bunseki{※米村祥裕}

\subsection{各戦略の複雑性}

%用意した戦略は次のような8行の配列とし、それぞれの行に圧縮を行った。\\

%\begin{table}[H]
%\caption{ベーシックストラテジーの戦略表}
%\label{table:data_type}
%\begin{center}
%\begin{tabular}{|cc|c|c|c|c|c|c|c|c|c|c|}
%\hline
%                            &            & \multicolumn{10}{c|}{ディーラーのアップカード}     \\ \cline{3-12} 
%                            &            & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & A \\ \hline
%\multicolumn{1}{|l|}{手札の合計} & 19以上       & S & S & S & S & S & S & S & S & S  & S \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 18         & S & S & S & S & S & S & S & S & S  & S \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 17         & S & S & S & S & S & S & S & S & S  & S \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 16         & S & S & S & S & S & H & H & H & H  & H \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 15         & S & S & S & S & S & H & H & H & H  & H \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 13$\sim$14 & S & S & S & S & S & H & H & H & H  & H \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 12         & H & H & S & S & S & H & H & H & H  & H \\ \cline{2-12} 
%\multicolumn{1}{|l|}{}      & 11以下       & H & H & H & H & H & H & H & H & H  & H \\ \hline
%\end{tabular}
%\end{center}
%\end{table}

今回用意した戦略を、全て圧縮したのが表\ref{table:data_type}である。


%\begin{figure}[htbp]
%\begin{center}
%\includegraphics[width=15cm,bb=0 0 602 261]{2.png}
%\end{center}
%\caption{各戦略の圧縮した後の文字列と複雑性}
%\label{picture}
%\end{figure}

\begin{table}[H]
\caption{各戦略の圧縮した後の文字列と複雑性\label{table:data_type}}
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
戦略           & 圧縮した後の文字列                                                                   & 文字列長 & 複雑性   \\ \hline
ベーシックストラテジー         & \begin{tabular}[c]{@{}l@{}}S10S5H5S5H5S5H5S5H5S5H5H2S3H5H10\end{tabular} & 30   & 0.375 \\ \hline
ベーシックストラテジー改変1      & S10S5H5S5H5S5H5S5H5S5H5S5H5H10                                              & 28   & 0.35  \\ \hline
ベーシックストラテジー改変2      & S10S5H5S5H5S5H5S5H5S5H5H10H10                                               & 26   & 0.325 \\ \hline
15以上になるまでヒットする戦略 & S10S10S10S10S10H10H10H10                                                    & 16   & 0.2   \\ \hline
16以上になるまでヒットする戦略 & S10S10S10S10H10H10H10H10                                                    & 16   & 0.2   \\ \hline
17以上になるまでヒットする戦略 & S10S10S10H10H10H10H10H10                                                    & 16   & 0.2   \\ \hline
18以上になるまでヒットする戦略 & S10S10H10H10H10H10H10H10                                                    & 16   & 0.2   \\ \hline
\end{tabular}
\end{center}
\end{table}

表\ref{table:data_type}を見ると、ベーシックストラテジーを改変した戦略の方が、複雑性が低く、プレイヤーにとって扱いやすいといえる。
また、手札の合計値が一定以上になるまでヒットする戦略は、複雑性がベーシックストラテジーの半分程度であり、プレイヤーに
とって扱いやすい戦略だといえる。
\bunseki{※渡邊凛}